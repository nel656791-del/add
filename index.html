<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Club Form Maker</title>

<script src="key.js" defer></script>

<style>
:root{
  --bg:#0b0f1a;
  --card:#12172a;
  --border:#1f2a4a;
  --text:#eaf0ff;
  --muted:#9aa4c7;
  --accent:#6ea8ff;
  --accent2:#9b7bff;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,#0b0f1a,#0f1530);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

.container{
  max-width:1000px;
  width:100%;
  display:grid;
  gap:20px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:24px;
}

h2,h3{margin-top:0}

p{
  font-size:14px;
  line-height:1.6;
  color:var(--muted);
}

input,button,textarea{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#0d1326;
  color:var(--text);
  font-size:14px;
}

textarea{resize:none}

button{
  margin-top:12px;
  cursor:pointer;
  font-weight:600;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000;
}

.socials{
  display:flex;
  gap:16px;
  margin-top:14px;
}
.socials a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#0d1326;
  text-decoration:none;
  color:var(--text);
  font-size:14px;
}
.socials a:hover{border-color:var(--accent)}
.socials img{
  width:22px;
  height:22px;
  display:block;
  object-fit:contain;
}

#status{
  margin-top:10px;
  font-size:13px;
}

#formMaker{display:none}
#output{display:none}
</style>
</head>

<body>
<div class="container">

  <!-- INFO -->
  <div class="card">
    <h2>Club Form Maker</h2>

    <p>
      Welcome to <strong>Club Form Maker</strong>.  
      Generate professional application forms with controlled access.
    </p>

    <p>
      Complete payment and contact the owner to receive your
      <strong>access key</strong>.
    </p>

    <p style="font-size:13px;">
      Once a key is entered, you have <strong>60 seconds</strong> to generate.
      Output is open-source. Payments are final.
    </p>

    <div class="socials">
      <a href="https://t.me/nelhumble" target="_blank" rel="noopener">
        <img src="https://i.ibb.co/XfnXPDmZ/5069.png" alt="Telegram" loading="eager">
        Telegram
      </a>

      <a href="https://www.facebook.com/profile.php?id=61577828138380" target="_blank" rel="noopener">
        <img src="https://i.ibb.co/gL2cMVSK/5072.png" alt="Facebook" loading="eager">
        Facebook
      </a>
    </div>
  </div>

  <!-- KEY -->
  <div class="card">
    <h3>üîê Access Key Verification</h3>

    <input id="accessKey" placeholder="Enter your access key">
    <button onclick="checkKey()">Verify Access</button>

    <div id="status"></div>
  </div>

  <!-- FORM MAKER -->
  <div class="card" id="formMaker">
    <h3>üõ† Form Generator</h3>

    <textarea id="templateBox" rows="10" readonly
      placeholder="Template will load after key verification..."></textarea>

    <button onclick="generateForm()">Generate</button>

    <div id="output">
      <textarea id="outputCode" rows="10" readonly></textarea>
      <button onclick="copyLink()">Copy Code</button>
    </div>
  </div>

</div>

<script>
async function loadTemplate(){
  try{
    const res = await fetch("./template.html",{cache:"no-store"});
    document.getElementById("templateBox").value = await res.text();
  }catch{
    document.getElementById("templateBox").value =
      "ERROR: template.html not found.\nUse localhost or hosting.";
  }
}

(function watchFormMaker(){
  const fm = document.getElementById("formMaker");
  new MutationObserver(()=>{
    if(getComputedStyle(fm).display!=="none") loadTemplate();
  }).observe(fm,{attributes:true});
})();

function generateForm(){
  const src = templateBox.value.trim();
  if(!src) return alert("Template not loaded.");
  outputCode.value = src;
  output.style.display = "block";
}

function copyLink(){
  outputCode.select();
  document.execCommand("copy");
  alert("Source code copied.");
}
</script>

</body>
</html>
